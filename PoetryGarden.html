<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #900112; -webkit-text-stroke: #900112}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0e6e6d; -webkit-text-stroke: #0e6e6d}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0f7001; -webkit-text-stroke: #0f7001}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0000ff; -webkit-text-stroke: #0000ff}
    span.s1 {font-kerning: none}
    span.s2 {font-kerning: none; color: #0000ff; background-color: #fffffe; -webkit-text-stroke: 0px #0000ff}
    span.s3 {font-kerning: none; background-color: #fffffe}
    span.s4 {font-kerning: none; color: #0e6e6d; background-color: #fffffe; -webkit-text-stroke: 0px #0e6e6d}
    span.s5 {font-kerning: none; color: #900112; background-color: #fffffe; -webkit-text-stroke: 0px #900112}
    span.s6 {font-kerning: none; color: #000000; background-color: #fffffe; -webkit-text-stroke: 0px #000000}
    span.s7 {font-kerning: none; color: #137646; background-color: #fffffe; -webkit-text-stroke: 0px #137646}
    span.s8 {font-kerning: none; color: #0f7001; background-color: #fffffe; -webkit-text-stroke: 0px #0f7001}
  </style>
</head>
<body>
<p class="p1"><span class="s1"></span><br></p>
<p class="p2"><span class="s2">import</span><span class="s3"> </span><span class="s4">React</span><span class="s3">, { useState, useEffect, useCallback } </span><span class="s2">from</span><span class="s3"> </span><span class="s5">'react'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s6"> { motion } </span><span class="s2">from</span><span class="s6"> </span><span class="s3">'framer-motion'</span><span class="s6">;</span></p>
<p class="p4"><span class="s2">import</span><span class="s6"> { </span><span class="s3">Card</span><span class="s6">, </span><span class="s3">CardContent</span><span class="s6">, </span><span class="s3">CardHeader</span><span class="s6">, </span><span class="s3">CardTitle</span><span class="s6"> } </span><span class="s2">from</span><span class="s6"> </span><span class="s5">'@/components/ui/card'</span><span class="s6">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s6"> { </span><span class="s4">Button</span><span class="s6"> } </span><span class="s2">from</span><span class="s6"> </span><span class="s3">'@/components/ui/button'</span><span class="s6">;</span></p>
<p class="p4"><span class="s2">import</span><span class="s6"> { </span><span class="s3">Tabs</span><span class="s6">, </span><span class="s3">TabsContent</span><span class="s6">, </span><span class="s3">TabsList</span><span class="s6">, </span><span class="s3">TabsTrigger</span><span class="s6"> } </span><span class="s2">from</span><span class="s6"> </span><span class="s5">'@/components/ui/tabs'</span><span class="s6">;</span></p>
<p class="p4"><span class="s2">import</span><span class="s6"> { </span><span class="s3">PenTool</span><span class="s6">, </span><span class="s3">Sparkles</span><span class="s6">, </span><span class="s3">Loader2</span><span class="s6">, </span><span class="s3">Target</span><span class="s6">, </span><span class="s3">Info</span><span class="s6"> } </span><span class="s2">from</span><span class="s6"> </span><span class="s5">'lucide-react'</span><span class="s6">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s6"> { </span><span class="s4">Link</span><span class="s6"> } </span><span class="s2">from</span><span class="s6"> </span><span class="s3">'react-router-dom'</span><span class="s6">;</span></p>
<p class="p2"><span class="s2">import</span><span class="s3"> { createPageUrl } </span><span class="s2">from</span><span class="s3"> </span><span class="s5">'@/utils'</span><span class="s3">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s6"> { </span><span class="s4">WritingEntry</span><span class="s6"> } </span><span class="s2">from</span><span class="s6"> </span><span class="s3">'@/entities/WritingEntry'</span><span class="s6">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s6"> { </span><span class="s4">User</span><span class="s6"> } </span><span class="s2">from</span><span class="s6"> </span><span class="s3">'@/entities/User'</span><span class="s6">;</span></p>
<p class="p3"><span class="s2">import</span><span class="s6"> { </span><span class="s4">InvokeLLM</span><span class="s6"> } </span><span class="s2">from</span><span class="s6"> </span><span class="s3">'@/integrations/Core'</span><span class="s6">;</span></p>
<p class="p2"><span class="s2">import</span><span class="s3"> { format } </span><span class="s2">from</span><span class="s3"> </span><span class="s5">'date-fns'</span><span class="s3">;</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p2"><span class="s2">const</span><span class="s3"> </span><span class="s4">GardenElement</span><span class="s3"> = ({ element, index }) =&gt; {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> iconMap = {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>tree: </span><span class="s5">'🌳'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>flower: </span><span class="s5">'🌸'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>river: </span><span class="s5">'💧'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>stone: </span><span class="s5">'🪨'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>mountain: </span><span class="s5">'⛰️'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>cloud: </span><span class="s5">'☁️'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>sun: </span><span class="s5">'☀️'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>moon: </span><span class="s5">'🌙'</span><span class="s3">,</span></p>
<p class="p5"><span class="s6"><span class="Apple-converted-space">    </span>path: </span><span class="s5">'🛤️'</span><span class="s6">, </span><span class="s3">// Changed from 'path' to an emoji that represents a path</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> sizeMap = {</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span>seedling: </span><span class="s3">'w-8 h-8 text-xl'</span><span class="s6">,</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span>budding: </span><span class="s3">'w-12 h-12 text-3xl'</span><span class="s6">,</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span>blooming: </span><span class="s3">'w-16 h-16 text-4xl'</span><span class="s6">,</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span>mature: </span><span class="s3">'w-20 h-20 text-5xl'</span><span class="s6">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">  </span></span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> positionStyles = [</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>{ top: </span><span class="s5">'20%'</span><span class="s3">, left: </span><span class="s5">'25%'</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>{ top: </span><span class="s5">'50%'</span><span class="s3">, left: </span><span class="s5">'60%'</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>{ top: </span><span class="s5">'70%'</span><span class="s3">, left: </span><span class="s5">'30%'</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>{ top: </span><span class="s5">'30%'</span><span class="s3">, left: </span><span class="s5">'80%'</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>{ top: </span><span class="s5">'60%'</span><span class="s3">, left: </span><span class="s5">'10%'</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>{ top: </span><span class="s5">'15%'</span><span class="s3">, left: </span><span class="s5">'70%'</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>{ top: </span><span class="s5">'40%'</span><span class="s3">, left: </span><span class="s5">'15%'</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>{ top: </span><span class="s5">'85%'</span><span class="s3">, left: </span><span class="s5">'50%'</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span>];</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s3">return</span><span class="s6"> (</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>&lt;motion.div</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>initial={{ opacity: </span><span class="s7">0</span><span class="s3">, scale: </span><span class="s7">0.5</span><span class="s3"> }}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>animate={{ opacity: </span><span class="s7">1</span><span class="s3">, scale: </span><span class="s7">1</span><span class="s3"> }}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>transition={{ delay: </span><span class="s7">0.2</span><span class="s3"> + index * </span><span class="s7">0.2</span><span class="s3"> }}</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span>className=</span><span class="s3">"absolute transform -translate-x-1/2 -translate-y-1/2 group"</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>style={positionStyles[index % positionStyles.length]}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>&gt;</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span>&lt;div className={</span><span class="s3">`relative flex items-center justify-center </span><span class="s6">${sizeMap[element.growth_stage] || </span><span class="s3">'w-12 h-12 text-3xl'</span><span class="s6">}</span><span class="s3">`</span><span class="s6">}&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>&lt;span role=</span><span class="s5">"img"</span><span class="s3"> aria-label={element.type}&gt;{iconMap[element.type?.toLowerCase()] || </span><span class="s5">'🌱'</span><span class="s3">}&lt;/span&gt;</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s3">"absolute bottom-full mb-2 w-max p-2 text-xs text-white bg-black/60 rounded-md opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50"</span><span class="s6">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>&lt;p className=</span><span class="s5">"font-bold capitalize"</span><span class="s3">&gt;{element.type}&lt;/p&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>&lt;p&gt;{element.description}&lt;/p&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>{element.representative_words &amp;&amp; element.representative_words.length &gt; </span><span class="s7">0</span><span class="s3"> &amp;&amp; (</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>&lt;p className=</span><span class="s5">"text-xs italic"</span><span class="s3">&gt;</span><span class="s4">Words</span><span class="s3">: {element.representative_words.join(</span><span class="s5">', '</span><span class="s3">)}&lt;/p&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>)}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>{element.emotional_resonance &amp;&amp; &lt;p className=</span><span class="s5">"text-xs italic"</span><span class="s3">&gt;</span><span class="s4">Resonance</span><span class="s3">: {element.emotional_resonance}&lt;/p&gt;}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>{element.psychological_impact &amp;&amp; &lt;p className=</span><span class="s5">"text-xs italic"</span><span class="s3">&gt;</span><span class="s4">Impact</span><span class="s3">: {element.psychological_impact}&lt;/p&gt;}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>{element.transcendent_quality &amp;&amp; &lt;p className=</span><span class="s5">"text-xs italic"</span><span class="s3">&gt;</span><span class="s4">Quality</span><span class="s3">: {element.transcendent_quality}&lt;/p&gt;}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>{element.brevity_pattern &amp;&amp; &lt;p className=</span><span class="s5">"text-xs italic"</span><span class="s3">&gt;</span><span class="s4">Pattern</span><span class="s3">: {element.brevity_pattern}&lt;/p&gt;}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>&lt;/motion.div&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span>);</span></p>
<p class="p2"><span class="s3">};</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p6"><span class="s3">export</span><span class="s6"> </span><span class="s3">default</span><span class="s6"> </span><span class="s3">function</span><span class="s6"> </span><span class="s4">PoetryGarden</span><span class="s6">() {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> [user, setUser] = useState(</span><span class="s2">null</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> [gardenData, setGardenData] = useState(</span><span class="s2">null</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> [isLoading, setIsLoading] = useState(</span><span class="s2">true</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> [selectedGrowth, setSelectedGrowth] = useState(</span><span class="s5">'all'</span><span class="s3">); </span><span class="s8">// This state is not currently used, but preserved.</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> [gardenIteration, setGardenIteration] = useState(</span><span class="s7">1</span><span class="s3">); </span><span class="s8">// This state is not currently updated, but preserved.</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p5"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s3">// Memoize generateGardenFromWritings to ensure stability across renders</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s2">const</span><span class="s3"> generateGardenFromWritings = useCallback(</span><span class="s2">async</span><span class="s3"> (userEmail) =&gt; {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>setIsLoading(</span><span class="s2">true</span><span class="s3">);</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">    </span></span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s2">try</span><span class="s3"> {</span></p>
<p class="p5"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s3">// Fetch all user's writing entries</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s2">const</span><span class="s3"> entries = </span><span class="s2">await</span><span class="s3"> </span><span class="s4">WritingEntry</span><span class="s3">.filter({ created_by: userEmail }, </span><span class="s5">'-created_date'</span><span class="s3">);</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">      </span></span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s2">if</span><span class="s3"> (entries.length === </span><span class="s7">0</span><span class="s3">) {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>setGardenData({</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>emotional: { elements: [], dominant_themes: [], word_count: </span><span class="s7">0</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>psychological: { elements: [], dominant_themes: [], word_count: </span><span class="s7">0</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>spiritual: { elements: [], dominant_themes: [], word_count: </span><span class="s7">0</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>total_entries: </span><span class="s7">0</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>garden_stage: </span><span class="s5">'seedling'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>overall_garden_maturity: </span><span class="s5">'seedling'</span><span class="s3">,</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">          </span>emotional_navigation_insights: </span><span class="s3">'No entries yet to analyze emotional navigation.'</span><span class="s6">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>categorization_technique_usage: </span><span class="s5">'No writings provided for categorization.'</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>privacy_respectful_analysis: </span><span class="s2">true</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>iterations_detected: </span><span class="s7">0</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>setIsLoading(</span><span class="s2">false</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s2">return</span><span class="s3">;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p5"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s3">// Combine all content for analysis</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s2">const</span><span class="s3"> allContent = entries.map(entry =&gt; entry.content).join(</span><span class="s5">'\n\n'</span><span class="s3">);</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s2">const</span><span class="s3"> totalWords = entries.reduce((sum, entry) =&gt; sum + (entry.word_count || </span><span class="s7">0</span><span class="s3">), </span><span class="s7">0</span><span class="s3">);</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">      </span></span></p>
<p class="p5"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s3">// Use AI to analyze and categorize the content based on The Emotional Healing Behind Words framework</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s2">const</span><span class="s3"> analysis = </span><span class="s2">await</span><span class="s3"> </span><span class="s4">InvokeLLM</span><span class="s3">({</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">        </span>prompt: </span><span class="s3">`Analyze this collection of personal writings using the comprehensive framework from "The Emotional Healing Behind Words." Create a living poetry garden landscape based on the emotional, psychological, and spiritual themes found within.</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">FRAMEWORK UNDERSTANDING:</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">1. The Emotional corpus encompasses happiness, sadness, doubt, fear, anger, and the full spectrum of human emotions. The key is how words are grouped by emotional resonance.</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">2. The Psychological corpus focuses on psychologically traumatic events and themes, characterized by patterns of terseness and brevity in sentences. Psychological writing exhibits fewer words per sentence due to the challenging nature of the issues addressed.</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">3. The Spiritual corpus focuses on themes like soul, transcendence, belief, and existential questions. Lexical density is used to analyze the depth of exploration. Higher density suggests a nuanced and intricate portrayal of spiritual ideas. Lower density suggests a simpler expression.</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">Content to analyze: "</span><span class="s6">${allContent}</span><span class="s3">"</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">Please categorize the writing into these three dimensions:</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">1. EMOTIONAL: Analyze emotional resonance and flow. Note patterns of how emotions connect and group together.</span></p>
<p class="p3"><span class="s3">2. PSYCHOLOGICAL: Examine traumatic events, survival mechanisms, and cognitive patterns. Specifically note terseness, brevity, and sentence length patterns.</span></p>
<p class="p3"><span class="s3">3. SPIRITUAL: Explore meaning-making, faith, and transcendence. Analyze lexical density (linguistic complexity) to gauge the depth of spiritual exploration.</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">For each dimension, provide:</span></p>
<p class="p3"><span class="s3">- Dominant themes (3-5 key themes found in the actual text)</span></p>
<p class="p3"><span class="s3">- Garden elements representing this growth (trees, flowers, water, stones, weather). Ensure variety in element types. Each element should have:</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>- type (e.g., "tree", "flower", "river", "stone", "cloud", "mountain", "sun", "moon", "path")</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>- description (brief explanation of what it represents)</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>- representative_words (3-5 actual words from the text that evoke this element)</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>- growth_stage (seedling, budding, blooming, mature)</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>- dimension-specific insights (e.g., emotional_resonance, psychological_impact, transcendent_quality, brevity_pattern)</span></p>
<p class="p3"><span class="s3">- Growth stage (seedling, budding, blooming, mature) for the dimension overall.</span></p>
<p class="p3"><span class="s3">- Specific analytical insights based on the framework (e.g., emotional flow patterns, psychological brevity, spiritual lexical density).</span></p>
<p class="p3"><span class="s3">- Insights about how the writer navigates their inner landscape via the Categorization Technique.</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p3"><span class="s3">Create a respectful, sensitive analysis that promotes well-being and self-awareness.`</span><span class="s6">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>response_json_schema: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>type: </span><span class="s5">"object"</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>properties: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>emotional: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>type: </span><span class="s5">"object"</span><span class="s3">,<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>properties: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>dominant_themes: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>emotional_spectrum: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>garden_elements: { type: </span><span class="s5">"array"</span><span class="s3">, items: {<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>type: </span><span class="s5">"object"</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>properties: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>type: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>description: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>representative_words: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>growth_stage: { type: </span><span class="s5">"string"</span><span class="s3">, enum: [</span><span class="s5">"seedling"</span><span class="s3">, </span><span class="s5">"budding"</span><span class="s3">, </span><span class="s5">"blooming"</span><span class="s3">, </span><span class="s5">"mature"</span><span class="s3">] },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>emotional_resonance: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>flow_pattern: { type: </span><span class="s5">"string"</span><span class="s3"> }</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>required: [</span><span class="s5">"type"</span><span class="s3">, </span><span class="s5">"description"</span><span class="s3">, </span><span class="s5">"growth_stage"</span><span class="s3">]</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>}},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>growth_level: { type: </span><span class="s5">"string"</span><span class="s3">, enum: [</span><span class="s5">"seedling"</span><span class="s3">, </span><span class="s5">"budding"</span><span class="s3">, </span><span class="s5">"blooming"</span><span class="s3">, </span><span class="s5">"mature"</span><span class="s3">] },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>navigation_patterns: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>word_flow_style: { type: </span><span class="s5">"string"</span><span class="s3"> }</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">              </span>required: [</span><span class="s3">"dominant_themes"</span><span class="s6">, </span><span class="s3">"garden_elements"</span><span class="s6">, </span><span class="s3">"growth_level"</span><span class="s6">]</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>psychological: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>type: </span><span class="s5">"object"</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>properties: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>dominant_themes: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>trauma_patterns: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>garden_elements: { type: </span><span class="s5">"array"</span><span class="s3">, items: {<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>type: </span><span class="s5">"object"</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>properties: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>type: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>description: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>representative_words: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>growth_stage: { type: </span><span class="s5">"string"</span><span class="s3">, enum: [</span><span class="s5">"seedling"</span><span class="s3">, </span><span class="s5">"budding"</span><span class="s3">, </span><span class="s5">"blooming"</span><span class="s3">, </span><span class="s5">"mature"</span><span class="s3">] },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>psychological_impact: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>brevity_pattern: { type: </span><span class="s5">"string"</span><span class="s3"> }</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>required: [</span><span class="s5">"type"</span><span class="s3">, </span><span class="s5">"description"</span><span class="s3">, </span><span class="s5">"growth_stage"</span><span class="s3">]</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>}},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>growth_level: { type: </span><span class="s5">"string"</span><span class="s3">, enum: [</span><span class="s5">"seedling"</span><span class="s3">, </span><span class="s5">"budding"</span><span class="s3">, </span><span class="s5">"blooming"</span><span class="s3">, </span><span class="s5">"mature"</span><span class="s3">] },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>sentence_patterns: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>trauma_processing_stage: { type: </span><span class="s5">"string"</span><span class="s3"> }</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">              </span>required: [</span><span class="s3">"dominant_themes"</span><span class="s6">, </span><span class="s3">"garden_elements"</span><span class="s6">, </span><span class="s3">"growth_level"</span><span class="s6">]</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>spiritual: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>type: </span><span class="s5">"object"</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>properties: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>dominant_themes: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>meaning_making_patterns: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>garden_elements: { type: </span><span class="s5">"array"</span><span class="s3">, items: {<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>type: </span><span class="s5">"object"</span><span class="s3">,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>properties: {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>type: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>description: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>representative_words: { type: </span><span class="s5">"array"</span><span class="s3">, items: { type: </span><span class="s5">"string"</span><span class="s3"> } },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>growth_stage: { type: </span><span class="s5">"string"</span><span class="s3">, enum: [</span><span class="s5">"seedling"</span><span class="s3">, </span><span class="s5">"budding"</span><span class="s3">, </span><span class="s5">"blooming"</span><span class="s3">, </span><span class="s5">"mature"</span><span class="s3">] },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span>transcendent_quality: { type: </span><span class="s5">"string"</span><span class="s3"> }</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                  </span>required: [</span><span class="s5">"type"</span><span class="s3">, </span><span class="s5">"description"</span><span class="s3">, </span><span class="s5">"growth_stage"</span><span class="s3">]</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>}},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>growth_level: { type: </span><span class="s5">"string"</span><span class="s3">, enum: [</span><span class="s5">"seedling"</span><span class="s3">, </span><span class="s5">"budding"</span><span class="s3">, </span><span class="s5">"blooming"</span><span class="s3">, </span><span class="s5">"mature"</span><span class="s3">] },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>existential_depth: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>spiritual_framework: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span>lexical_density_analysis: { </span><span class="s5">"type"</span><span class="s3">: </span><span class="s5">"string"</span><span class="s3"> }</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">              </span>},</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">              </span>required: [</span><span class="s3">"dominant_themes"</span><span class="s6">, </span><span class="s3">"garden_elements"</span><span class="s6">, </span><span class="s3">"growth_level"</span><span class="s6">]</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>overall_garden_maturity: { type: </span><span class="s5">"string"</span><span class="s3">, enum: [</span><span class="s5">"seedling"</span><span class="s3">, </span><span class="s5">"budding"</span><span class="s3">, </span><span class="s5">"blooming"</span><span class="s3">, </span><span class="s5">"mature"</span><span class="s3">] },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>emotional_navigation_insights: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>categorization_technique_usage: { type: </span><span class="s5">"string"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>privacy_respectful_analysis: { type: </span><span class="s5">"boolean"</span><span class="s3"> },</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span>iterations_detected: { type: </span><span class="s5">"number"</span><span class="s3"> }</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">          </span>},</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">          </span>required: [</span><span class="s3">"emotional"</span><span class="s6">, </span><span class="s3">"psychological"</span><span class="s6">, </span><span class="s3">"spiritual"</span><span class="s6">, </span><span class="s3">"overall_garden_maturity"</span><span class="s6">, </span><span class="s3">"emotional_navigation_insights"</span><span class="s6">, </span><span class="s3">"categorization_technique_usage"</span><span class="s6">, </span><span class="s3">"privacy_respectful_analysis"</span><span class="s6">]</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p1"><span class="s1"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>setGardenData({</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>...analysis,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>total_entries: entries.length,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>total_words: totalWords,</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>last_updated: </span><span class="s2">new</span><span class="s3"> </span><span class="s4">Date</span><span class="s3">().toISOString(),</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span>entries_analyzed: entries.slice(</span><span class="s7">0</span><span class="s3">, </span><span class="s7">5</span><span class="s3">) </span><span class="s8">// Keep recent entries for reference</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">      </span></span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span>} </span><span class="s2">catch</span><span class="s3"> (error) {</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">      </span>console.error(</span><span class="s5">'Error generating garden:'</span><span class="s3">, error);</span></p>
<p class="p5"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s3">// Set a default garden data in case of error, to avoid null state in UI</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space"> </span></span></p>
</body>
</html>
